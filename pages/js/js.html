<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>基本数据类型 | 前端</title>
    <meta name="description" content="记录一些有趣的">
    <link rel="stylesheet" href="/assets/style.9e31a587.css">
    <link rel="modulepreload" href="/assets/app.9fda2e54.js">
    <link rel="modulepreload" href="/assets/pages_js_js.md.e1e0c6d3.lean.js">
    
    <meta name="author" content="Vbenjs Team">
  <meta name="keywords" content="vben, vitejs, vite, ant-design-vue, vue">
  <link rel="icon" type="image/svg+xml" href="/logo.svg">
  <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
  <meta name="keywords" content="vue vben admin docs">
  <link rel="icon" href="/favicon.ico">
  <meta name="twitter:title" content="基本数据类型 | 前端">
  <meta property="og:title" content="基本数据类型 | 前端">
  </head>
  <body>
    <div id="app"><div class="theme"><header class="nav-bar" data-v-2a5924c9><div class="showSide" data-v-2a5924c9><span role="img" aria-label="menu" class="anticon anticon-menu" data-v-2a5924c9><svg focusable="false" class="" style="" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true" viewbox="64 64 896 896"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></div><div data-v-2a5924c9><span data-v-2a5924c9>前端博客</span></div><div class="flex-grow" data-v-2a5924c9></div><!--[--><div class="nav-link" data-v-9c461d30><!--[--><!--[--><div class="item" data-v-9c461d30><div class="nav-dropdown-link navDrop" data-v-9c461d30 data-v-6ecf7aae><button class="button" data-v-6ecf7aae><span class="button-text" data-v-6ecf7aae>源码</span><span class="button-arrow" data-v-6ecf7aae></span></button><ul class="dialog" data-v-6ecf7aae><!--[--><li class="dialog-item" data-v-6ecf7aae><div class="nav-dropdown-link-item" data-v-6ecf7aae><a class="item" href="/pages/vue/reactivity" data-v-6ecf7aae><span class="arrow" data-v-6ecf7aae></span><span class="text" data-v-6ecf7aae>vue3源码</span><span class="icon" data-v-6ecf7aae><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-6ecf7aae><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><!--]--></ul></div></div><!--]--><!--[--><div class="item" data-v-9c461d30><div class="nav-dropdown-link navDrop" data-v-9c461d30 data-v-6ecf7aae><button class="button" data-v-6ecf7aae><span class="button-text" data-v-6ecf7aae>面试题</span><span class="button-arrow" data-v-6ecf7aae></span></button><ul class="dialog" data-v-6ecf7aae><!--[--><li class="dialog-item" data-v-6ecf7aae><div class="nav-dropdown-link-item" data-v-6ecf7aae><a class="item" href="/pages/js/js" data-v-6ecf7aae><span class="arrow" data-v-6ecf7aae></span><span class="text" data-v-6ecf7aae>面试题</span><span class="icon" data-v-6ecf7aae><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-6ecf7aae><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><!--]--></ul></div></div><!--]--><!--[--><div class="item" data-v-9c461d30><div class="nav-dropdown-link navDrop" data-v-9c461d30 data-v-6ecf7aae><button class="button" data-v-6ecf7aae><span class="button-text" data-v-6ecf7aae>数据库</span><span class="button-arrow" data-v-6ecf7aae></span></button><ul class="dialog" data-v-6ecf7aae><!--[--><li class="dialog-item" data-v-6ecf7aae><div class="nav-dropdown-link-item" data-v-6ecf7aae><a class="item" href="/pages/mysql/mysql" data-v-6ecf7aae><span class="arrow" data-v-6ecf7aae></span><span class="text" data-v-6ecf7aae>mysql</span><span class="icon" data-v-6ecf7aae><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-6ecf7aae><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><!--]--></ul></div></div><!--]--><!--[--><div class="item" data-v-9c461d30><div class="nav-dropdown-link navDrop" data-v-9c461d30 data-v-6ecf7aae><button class="button" data-v-6ecf7aae><span class="button-text" data-v-6ecf7aae>实用的库</span><span class="button-arrow" data-v-6ecf7aae></span></button><ul class="dialog" data-v-6ecf7aae><!--[--><li class="dialog-item" data-v-6ecf7aae><div class="nav-dropdown-link-item" data-v-6ecf7aae><a class="item" href="/pages/useLibrary/index" data-v-6ecf7aae><span class="arrow" data-v-6ecf7aae></span><span class="text" data-v-6ecf7aae>实用的库</span><span class="icon" data-v-6ecf7aae><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-6ecf7aae><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><!--]--></ul></div></div><!--]--><!--]--><button class="nav-btn" aria-label="Toggle Theme" data-v-9c461d30><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" width="1em" height="1em" preserveaspectratio="xMidYMid meet" viewbox="0 0 24 24" data-v-9c461d30><path fill="currentColor" d="M12 18a6 6 0 1 1 0-12a6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8a4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636L5.636 7.05L3.515 4.93zM16.95 18.364l1.414-1.414l2.121 2.121l-1.414 1.414l-2.121-2.121zm2.121-14.85l1.414 1.415l-2.121 2.121l-1.414-1.414l2.121-2.121zM5.636 16.95l1.414 1.414l-2.121 2.121l-1.414-1.414l2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"></path></svg><span class="iconify" data-icon="ri:sun-line" data-v-9c461d30></span></button></div><div class="nav-mini" data-v-9c461d30><button class="nav-btn" aria-label="Toggle Theme" data-v-9c461d30><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" width="1em" height="1em" preserveaspectratio="xMidYMid meet" viewbox="0 0 24 24" data-v-9c461d30><path fill="currentColor" d="M12 18a6 6 0 1 1 0-12a6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8a4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636L5.636 7.05L3.515 4.93zM16.95 18.364l1.414-1.414l2.121 2.121l-1.414 1.414l-2.121-2.121zm2.121-14.85l1.414 1.415l-2.121 2.121l-1.414-1.414l2.121-2.121zM5.636 16.95l1.414 1.414l-2.121 2.121l-1.414-1.414l2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"></path></svg><span class="iconify" data-icon="ri:sun-line" data-v-9c461d30></span></button></div><!--]--></header><!----><aside class="sidebar" data-v-8e164692><nav class="nav-links nav" data-v-8e164692 data-v-c1117b78><!--[--><div data-v-c1117b78><div class="nav-dropdown-link" data-v-c1117b78 data-v-10889c82><button class="button" data-v-10889c82><span class="button-text" data-v-10889c82>源码</span><span class="right button-arrow" data-v-10889c82></span></button><ul class="dialog" data-v-10889c82><!--[--><li class="dialog-item" data-v-10889c82><div class="nav-dropdown-link-item" data-v-10889c82><a class="item" href="/pages/vue/reactivity" data-v-10889c82><span class="arrow" data-v-10889c82></span><span class="text" data-v-10889c82>vue3源码</span></a></div></li><!--]--></ul></div></div><div data-v-c1117b78><div class="nav-dropdown-link" data-v-c1117b78 data-v-10889c82><button class="button" data-v-10889c82><span class="button-text" data-v-10889c82>面试题</span><span class="right button-arrow" data-v-10889c82></span></button><ul class="dialog" data-v-10889c82><!--[--><li class="dialog-item" data-v-10889c82><div class="nav-dropdown-link-item" data-v-10889c82><a class="item" href="/pages/js/js" data-v-10889c82><span class="arrow" data-v-10889c82></span><span class="text" data-v-10889c82>面试题</span></a></div></li><!--]--></ul></div></div><div data-v-c1117b78><div class="nav-dropdown-link" data-v-c1117b78 data-v-10889c82><button class="button" data-v-10889c82><span class="button-text" data-v-10889c82>数据库</span><span class="right button-arrow" data-v-10889c82></span></button><ul class="dialog" data-v-10889c82><!--[--><li class="dialog-item" data-v-10889c82><div class="nav-dropdown-link-item" data-v-10889c82><a class="item" href="/pages/mysql/mysql" data-v-10889c82><span class="arrow" data-v-10889c82></span><span class="text" data-v-10889c82>mysql</span></a></div></li><!--]--></ul></div></div><div data-v-c1117b78><div class="nav-dropdown-link" data-v-c1117b78 data-v-10889c82><button class="button" data-v-10889c82><span class="button-text" data-v-10889c82>实用的库</span><span class="right button-arrow" data-v-10889c82></span></button><ul class="dialog" data-v-10889c82><!--[--><li class="dialog-item" data-v-10889c82><div class="nav-dropdown-link-item" data-v-10889c82><a class="item" href="/pages/useLibrary/index" data-v-10889c82><span class="arrow" data-v-10889c82></span><span class="text" data-v-10889c82>实用的库</span></a></div></li><!--]--></ul></div></div><!--]--></nav><ul class="sidebar-links" data-v-8e164692><!--[--><li class="sidebar-link" data-v-8e164692><p class="sidebar-link-item">面试题</p><ul class="sidebar-links"><!--[--><li class="sidebar-link"><a class="active sidebar-link-item" href="/pages/js/js">javascript基础</a><ul class="sidebar-links"><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="#基本数据类型">基本数据类型</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#引用类型">引用类型</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#类型转换">类型转换</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#nan是什么和用typeof会输出什么">NaN是什么和用typeof会输出什么</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#数字价格千分位分割">数字价格千分位分割</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#什么是闭包">什么是闭包</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#作用域和作用域链">作用域和作用域链</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#原型和原型链">原型和原型链</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#去重">去重</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#数组扁平化">数组扁平化</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#var、let和const的区别">var、let和const的区别</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#展开和收缩符">展开和收缩符</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#解构赋值">解构赋值</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#模版字符串">模版字符串</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#箭头函数">箭头函数</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#eventloop事件循环">eventLoop事件循环</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#前端监控">前端监控</a><!----></li><!--]--></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/pages/js/javascriptAD">javascript进阶</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/pages/js/vue">vue</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/pages/js/wx">微信小程序</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/pages/js/http">http</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/pages/js/dataStructure">数据结构</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/pages/js/algorithm">算法</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/pages/js/git">git</a><!----></li><!--]--></ul></li><!--]--></ul></aside><div class="sidebar-mask"></div><div class="page" data-v-76de30a3><div class="container" data-v-76de30a3><div class="content" data-v-76de30a3><div style="position:relative;" data-v-76de30a3><div><h3 id="基本数据类型" tabindex="-1">基本数据类型 <a class="header-anchor" href="#基本数据类型" aria-hidden="true">#</a></h3><p>基本类型</p><p><strong>六种基本数据类型</strong></p><ul><li>string</li><li>number</li><li>boolean</li><li>null</li><li>undefined</li><li>symbol</li></ul><h3 id="引用类型" tabindex="-1">引用类型 <a class="header-anchor" href="#引用类型" aria-hidden="true">#</a></h3><p>在javascript中，除了基本数据类型，其他的都是引用类型，引用类型在栈中存储的是指向堆中内容的内存地址，而原始类型在栈中储存的是值</p><div class="language-javascript"><pre><code><span class="token keyword">var</span> arr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">var</span> b<span class="token operator">=</span>arr
arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[1]</span>
</code></pre></div><p>因为它们在内存中使用的是同一个地址</p><h3 id="类型转换" tabindex="-1">类型转换 <a class="header-anchor" href="#类型转换" aria-hidden="true">#</a></h3><p>javascript中，类型转换只有三种</p><ol><li><p>转换成数字</p></li><li><p>转换成布尔值</p></li><li><p>转换成字符串</p><h5 id="经典面试题" tabindex="-1">经典面试题 <a class="header-anchor" href="#经典面试题" aria-hidden="true">#</a></h5><div class="language-javascript"><pre><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span>
</code></pre></div></li></ol><p><strong>代码分析</strong>：</p><ol><li><p>左侧是一个对象(数组)</p></li><li><p>右侧是一个布尔值，对象<code>[]</code>转换成布尔值<code>true</code>，因为除了<code>null</code>所有对象都转换成布尔值，所以<code>![]</code>结果为<code>false</code></p></li><li><p>此时相当于<code>对象==布尔值</code>，依据类型转换规则，转换成数字类型进行比较</p></li><li><p>对象(空数组)转换成<code>0</code>，布尔值<code>false</code>转换成<code>0</code></p></li><li><p>即<code>0==0</code>，返回<code>true</code></p></li></ol><p>类型转换规则，如下图：</p><p><img src="/assets/type.793fd87e.png" alt=""></p><h3 id="nan是什么和用typeof会输出什么" tabindex="-1">NaN是什么和用typeof会输出什么 <a class="header-anchor" href="#nan是什么和用typeof会输出什么" aria-hidden="true">#</a></h3><p>NaN：Not a Number;表示非数字</p><p>Typeof NaN === &#39;number&#39;</p><h3 id="数字价格千分位分割" tabindex="-1">数字价格千分位分割 <a class="header-anchor" href="#数字价格千分位分割" aria-hidden="true">#</a></h3><p>将123456789变成123,456,789</p><div class="language-"><pre><code>&#39;123456789&#39;.replace(/(?!^)(?=(\d{3})+$)/g, &#39;,&#39;) // 123,456,789
</code></pre></div><h3 id="什么是闭包" tabindex="-1">什么是闭包 <a class="header-anchor" href="#什么是闭包" aria-hidden="true">#</a></h3><p>闭包是指有权访问另一个函数作用域中的变量的函数</p><h5 id="词法作用域对执行环境的保护" tabindex="-1">词法作用域对执行环境的保护 <a class="header-anchor" href="#词法作用域对执行环境的保护" aria-hidden="true">#</a></h5><p>javascript的作用域有两部分组成即词法作用域和动态作用域</p><p>词法作用域是静态的：</p><div class="language-javascript"><pre><code><span class="token keyword">var</span> x<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> y<span class="token operator">=</span><span class="token number">1</span>
  <span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">var</span> z<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>z<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//在a或者全局作用下都无法访问</span>

<span class="token comment">//b无论在何处执行都是可以读取x,y,z</span>
</code></pre></div><p>当一个函数能够记住并访问它所在的词法作用域的时候，就产生了闭包，即使函数是在词法作用域之外执行</p><p><strong>闭包的几种表现形式</strong></p><ol><li><p>返回一个函数</p><p>这种形式的闭包在javascript的代码编写中，是非常常见的一种方式。</p><div class="language-javascript"><pre><code><span class="token keyword">var</span> a<span class="token operator">=</span><span class="token number">1</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> a<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
  
  <span class="token comment">//这就是闭包</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> bar <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 输出2，而不是1</span>
<span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li><li><p>作为函数参数传递</p><p>无论通过何种手段将内部函数传递到它所在词法作用域之外，它都会持有对原始作用域的引用，无论在何处执行这个函数，都会产生闭包。</p><div class="language-javascript"><pre><code><span class="token keyword">var</span> a<span class="token operator">=</span><span class="token number">1</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> a<span class="token operator">=</span><span class="token number">2</span>
  <span class="token keyword">function</span> <span class="token function">baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">bar</span><span class="token punctuation">(</span>baz<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//这就是闭包</span>
<span class="token punctuation">}</span>
<span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出2</span>
</code></pre></div></li><li><p>回调函数</p><p>定时器、事件监听、ajax请求、跨窗口通信、Web Workers或者任何异步中，只要使用了回调函数，实际上就是在使用闭包。</p><div class="language-javascript"><pre><code><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">tiemHandle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;timer&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span>

<span class="token comment">// 事件监听</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&#39;#container&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;DOM Listener&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li><li><p>非典型闭包IIFF(立即执行函数表达式)</p><p>IIFF（立即执行函数表达式）并不是一个典型的闭包，但它确实创建了一个闭包。</p><div class="language-javascript"><pre><code><span class="token keyword">var</span> a<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token constant">IIFF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></li></ol><h5 id="经典循环和闭包面试题" tabindex="-1">经典循环和闭包面试题 <a class="header-anchor" href="#经典循环和闭包面试题" aria-hidden="true">#</a></h5><p>思考一下代码运行结果是什么，如何改进</p><div class="language-javascript"><pre><code><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>i<span class="token operator">*</span><span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>代码分析</strong>：</p><ol><li>for循环创建了5个定时器，并且定时器是在循环结束后才开始执行</li><li>for循环结束后，用var 定义的变量i此时等于6</li><li>依次执行五个定时器，都打印变量i，所以结果是打印5次6</li></ol><p><strong>第一种改进方法：</strong> 利用<code>IIFE(立即执行函数表达式)</code>当每次<code>for</code>循环时，把此时的<code>i</code>变量传递到定时器中</p><div class="language-javascript"><pre><code><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">j</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>i<span class="token operator">*</span><span class="token number">1000</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>第二种方法：</strong> setTimeout函数的第三个参数，可以作为定时器回调函数中的形参使用</p><div class="language-javascript"><pre><code><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>i<span class="token operator">*</span><span class="token number">1000</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>第三种方法：</strong> 在循环中使用<code>let</code>代替<code>var</code></p><div class="language-javascript"><pre><code><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>i<span class="token operator">*</span><span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="作用域和作用域链" tabindex="-1">作用域和作用域链 <a class="header-anchor" href="#作用域和作用域链" aria-hidden="true">#</a></h3><ul><li><h4 id="作用域" tabindex="-1">作用域 <a class="header-anchor" href="#作用域" aria-hidden="true">#</a></h4><p>即变量和函数生效的区域或集合</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;函数内部变量&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Uncaught ReferenceError: str is not defined</span>
</code></pre></div><p>函数<code>fn</code>内部创建一个<code>str</code>变量，当我们在全局访问这个变量的时候，系统会报错</p><p>这就说明我们在全局是无法获取到（闭包除外）函数内部的变量</p><h5 id="作用域一般分三层：" tabindex="-1">作用域一般分三层： <a class="header-anchor" href="#作用域一般分三层：" aria-hidden="true">#</a></h5><ul><li><p><strong>全局作用域</strong></p><p>任何不在函数中或者大括号中声明的变量都是全局作用域，全局作用域下声明的变量可以在程序的任意位置访问</p><div class="language-js"><pre><code><span class="token keyword">let</span> a<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1</span>
</code></pre></div></li><li><p><strong>函数作用域</strong></p><p>函数作用域也叫局部作用域，如果一个变量是在函数内部声明的它就在一个函数作用域下面。这些变量只能在函数内部访问，不能在函数以外去访问</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//报错 为定义</span>
</code></pre></div></li><li><p><strong>块级作用域</strong></p><p>ES6引入<code>let</code> 和<code>const</code> 关键字和<code>var </code>关键字不同，在大括号中使用<code>let</code> 和<code>const</code> 声明的变量存在于块级作用域中，在大括号之外不能访问这些变量。</p><div class="language-js"><pre><code><span class="token punctuation">{</span>
 <span class="token keyword">let</span> count<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//报错</span>
</code></pre></div></li></ul></li><li><h4 id="作用域链" tabindex="-1">作用域链 <a class="header-anchor" href="#作用域链" aria-hidden="true">#</a></h4><p>当在javascript中使用一个变量时，首先javascript引擎会尝试在当前作用域下去寻找该变量，如果没找到，再到它的上层作用域寻找，以此类推，最后到全局作用域上寻找。</p></li></ul><h3 id="原型和原型链" tabindex="-1">原型和原型链 <a class="header-anchor" href="#原型和原型链" aria-hidden="true">#</a></h3><ul><li><h4 id="原型" tabindex="-1">原型 <a class="header-anchor" href="#原型" aria-hidden="true">#</a></h4><p><code>javascript</code> 常被描述为一种基于原型的语言——每个对象拥有一个原型对象。</p><p>当试图访问一个对象的属性时，它不仅仅在该对象上搜寻，还会搜寻该对象的原型，以及该对象的原型的原型，依次层层向上搜索，直到找到一个名字匹配的属性或到达原型链的末尾。</p><p>函数可以有属性。每个函数都有一个特殊的属性叫作原型<code>prototype</code> 。</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
<span class="token comment">//输出</span>
<span class="token punctuation">{</span>
    <span class="token literal-property property">constructor</span><span class="token operator">:</span> ƒ <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">__proto__</span><span class="token operator">:</span><span class="token function">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div></li><li><p>原型链</p><p>原型对象也可能拥有原型，并从中继承方法和属性，一层一层、以此类推。这种关系常被称为原型链，它解析了为何一个对象会拥有定义在其他对象中的属性和方法。</p><p>在对象实例和它的构造函数之间建立一个链接（它是<code>__proto__</code> 属性，是从构造函数的<code>prototype</code> 属性派生的）</p></li></ul><h3 id="去重" tabindex="-1">去重 <a class="header-anchor" href="#去重" aria-hidden="true">#</a></h3><ul><li><h4 id="双层循环" tabindex="-1">双层循环 <a class="header-anchor" href="#双层循环" aria-hidden="true">#</a></h4></li></ul><div class="language-js"><pre><code><span class="token keyword">var</span> arr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">]</span>
<span class="token keyword">function</span> <span class="token function">unique</span><span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> res<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> arrayLen <span class="token operator">=</span> array<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arrayLen<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>res<span class="token punctuation">.</span>length<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>array<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">===</span> res<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>j<span class="token operator">===</span>res<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>
      res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>array<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>  
     <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> res
<span class="token punctuation">}</span>
</code></pre></div><h3 id="数组扁平化" tabindex="-1">数组扁平化 <a class="header-anchor" href="#数组扁平化" aria-hidden="true">#</a></h3><p>尽量多说几种方式</p><div class="language-js"><pre><code><span class="token keyword">let</span> arr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">26</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre></div><ul><li><p>ES6提供的函数：flat</p><div class="language-js"><pre><code><span class="token keyword">let</span> newArr<span class="token operator">=</span>arr<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//参数为整数或Infinity，代表展开多少层</span>
</code></pre></div></li><li><p>递归遍历</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">flatten</span><span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> res<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> array<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      res<span class="token operator">=</span>res<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token function">flatten</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
      res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> res
<span class="token punctuation">}</span>
<span class="token function">flatten</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>
</code></pre></div></li><li><p>使用reduce递归</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">flatten</span><span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> array<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">pre<span class="token punctuation">,</span>current<span class="token punctuation">,</span>currentIndex<span class="token punctuation">,</span>array</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>current<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> pre<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token function">flatten</span><span class="token punctuation">(</span>current<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> pre<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>current<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">flatten</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div></li><li><p>while循环find与扩展运算符</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">flatten</span><span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">while</span><span class="token punctuation">(</span>array<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    array<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token operator">...</span>array<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> array
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">flatten</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div></li><li><p>数组强制类型转换</p><p>这个只限于基础类型</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">flatten</span><span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 
  <span class="token keyword">return</span> array<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;,&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=&gt;</span><span class="token function">Number</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">flatten</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div></li><li><p>使用JSON的函数和正则表达</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">flatten</span><span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> res<span class="token operator">=</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span>
  res<span class="token operator">=</span>res<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(\[|\])</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  res<span class="token operator">=</span><span class="token string">&#39;[&#39;</span><span class="token operator">+</span>res<span class="token operator">+</span><span class="token string">&#39;]&#39;</span>
  <span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">flatten</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div></li><li><p>使用栈和扩展运算符</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">flatten</span><span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">let</span> res<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
 <span class="token keyword">let</span> stack<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span>
 <span class="token keyword">while</span><span class="token punctuation">(</span>stack<span class="token punctuation">.</span>length<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">const</span> item <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//出栈</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>item<span class="token punctuation">)</span>
   <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
     item <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> res<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
 <span class="token keyword">return</span> res
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">flatten</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul><h3 id="var、let和const的区别" tabindex="-1">var、let和const的区别 <a class="header-anchor" href="#var、let和const的区别" aria-hidden="true">#</a></h3><ol><li>var声明的变量会提升到作用域顶部，而let和const不会进行提升</li><li>var声明的全局变量会挂载到window对象上，而let和const不会</li><li>var可以重复声明同一个变量，而let和const不可以</li><li>var声明的变量作用域范围是函数作用域，而let和const声明的变量作用域范围时块级作用域</li><li>const 声明的常量，一旦声明则不能再次赋值,再次赋值会报错（更改对象属性不会，因为对象地址没有变）</li></ol><h3 id="展开和收缩符" tabindex="-1">展开和收缩符 <a class="header-anchor" href="#展开和收缩符" aria-hidden="true">#</a></h3><p>ES6新增加的运算符<code>...</code>，称为展开或者收缩，具体作用取决于到底如何使用。</p><div class="language-javascript"><pre><code><span class="token comment">//...展开</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>z</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出1，2，3</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> arr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token operator">...</span>arr<span class="token punctuation">)</span>


<span class="token comment">//收缩</span>
<span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>arr</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[1,2,3,4,5]</span>
<span class="token punctuation">}</span>

<span class="token function">bar</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="解构赋值" tabindex="-1">解构赋值 <a class="header-anchor" href="#解构赋值" aria-hidden="true">#</a></h3><p>常用的解构赋值有以下两种情况</p><ol><li><p>对象的解构</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token constant">X</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
    <span class="token constant">Y</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token constant">Z</span><span class="token operator">:</span> <span class="token number">6</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>z<span class="token punctuation">}</span> <span class="token operator">=</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></li><li><p>数组的解构</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></li></ol><h3 id="模版字符串" tabindex="-1">模版字符串 <a class="header-anchor" href="#模版字符串" aria-hidden="true">#</a></h3><p><code>${内容}</code>：模版字符串里的内容可以是变量、函数调用或者表达式</p><div class="language-js"><pre><code><span class="token keyword">const</span> name<span class="token operator">=</span><span class="token string">&quot;张三&quot;</span>
<span class="token keyword">const</span> str<span class="token operator">=</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">我叫</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
</code></pre></div><h3 id="箭头函数" tabindex="-1">箭头函数 <a class="header-anchor" href="#箭头函数" aria-hidden="true">#</a></h3><h3 id="eventloop事件循环" tabindex="-1">eventLoop事件循环 <a class="header-anchor" href="#eventloop事件循环" aria-hidden="true">#</a></h3><p>​ 注意：</p><p>​ javascript是单线程执行的，在javascript运行期间，有可能会阻塞UI渲染， 这在一方面说明javascript引擎线程和UI渲染线程是互斥的。javascript被设计成单线程的原因在于javascript可以修改DOM，如果在javascript工作期间，ui还在渲染的话，则可能不会正确渲染DOM。单线程也有一些好处:</p><ol><li><p>节省内存空间</p></li><li><p>节省上下文切换时间</p></li><li><p>没有锁的问题存在</p></li></ol><h5 id="进程和线程：" tabindex="-1">进程和线程： <a class="header-anchor" href="#进程和线程：" aria-hidden="true">#</a></h5><p>​ <strong>进程：</strong> CPU在运行指令及加载和保存上下文所需要的时间，放在应用上一个程序就是一个进程，一个浏览器tab选项就是一个进程。</p><p>​ <strong>线程：</strong> 线程是进程中更小的单位，描述了执行一段指令所需要的时间。</p><h5 id="执行栈：" tabindex="-1">执行栈： <a class="header-anchor" href="#执行栈：" aria-hidden="true">#</a></h5><p>​ 可以把执行栈看成是一个函数存储调用的栈结构，遵循先进后出的原则，一个执行栈可能表现如下：</p><p><img src="/assets/task.2851342a.gif" alt=""></p><h5 id="eventloop" tabindex="-1">eventLoop: <a class="header-anchor" href="#eventloop" aria-hidden="true">#</a></h5><p>​ 上面讲到函数会在执行栈中执行，那么当遇到异步代码后，改如何处理？ 其实当遇到异步代码的时候，会被挂起在Task队列中，一旦执行栈为空，就会从Task中拿出需要执行的代码执行，所以本质上讲js中的异步还是同步行为。</p><p><img src="/assets/eventLoop.a3f84dfa.png" alt=""></p><p>如上图,可以看到，不同的异步任务是有区别的，异步任务又可以划分如下：</p><ol><li>宏任务（script、setTimeout、setInterval、setImmidiate、I/O、UI Rendering）可以有多个队列</li><li>微任务（procress.nextTick、Promise.then、Object.observe、MutationObserver）只能有一个队列</li></ol><p><strong>执行顺序：</strong> 当执行栈执行完毕后，会首先执行微任务队列，当微任务队列执行完毕再从宏任务中读取并执行，当再次遇到微任务时，放入微任务队列。</p><h3 id="前端监控" tabindex="-1">前端监控 <a class="header-anchor" href="#前端监控" aria-hidden="true">#</a></h3><h4 id="页面埋点" tabindex="-1">页面埋点 <a class="header-anchor" href="#页面埋点" aria-hidden="true">#</a></h4><p>一般会监控以下数据：</p><ol><li>PV / UV</li><li>停留时间</li><li>流量来源</li><li>用户交互</li></ol><h4 id="性能监控" tabindex="-1">性能监控 <a class="header-anchor" href="#性能监控" aria-hidden="true">#</a></h4><p>使用浏览器自带的Performance API来实现：MDN<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/performance_property" target="_blank" rel="noopener noreferrer">直达</a></p><p>你可以尝试在浏览器控制台执行</p><div class="language-js"><pre><code>window<span class="token punctuation">.</span>performance
</code></pre></div><h4 id="异常监控" tabindex="-1">异常监控 <a class="header-anchor" href="#异常监控" aria-hidden="true">#</a></h4><p>对于代码的运行错误，通常使用window.onerror拦截报错，但是对于跨域的代码运行会显示script error. 对于这种情况需要给script 标签添加 crossorigin属性</p><p>对于某些浏览器可能不会显示堆栈信息，这种情况通过arguments.callee.caller来做栈递归</p><p>对于异步代码可以使用catch捕获错误，</p></div></div></div><div class="footer" data-v-76de30a3><div class="edit-link" data-v-76de30a3 data-v-3c031474><a class="link" href="https://github.com/hu5871/hu5871.github.io" target="_blank" rel="noopener noreferrer" data-v-3c031474>为此页提供修改建议 <svg class="icon outbound icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-3c031474><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="next-and-prev-link" data-v-76de30a3 data-v-b1c594f2><div class="container" data-v-b1c594f2><div class="prev" data-v-b1c594f2><!----></div><div class="next" data-v-b1c594f2><a class="link" href="/pages/js/javascriptAD" data-v-b1c594f2><span class="text" data-v-b1c594f2>javascript进阶</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-b1c594f2><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div></div></div></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"readme.md\":\"fa571d24\",\"index.md\":\"3e9527f5\",\"pages_engineering_index.md\":\"7f818855\",\"pages_js_algorithm.md\":\"eeef05cc\",\"pages_js_cssandhtml.md\":\"db234e54\",\"pages_js_datastructure.md\":\"b35141e2\",\"pages_js_git.md\":\"7fbcfca3\",\"pages_js_http.md\":\"f2c9c440\",\"pages_js_javascriptad.md\":\"ae71f48c\",\"pages_js_js.md\":\"e1e0c6d3\",\"pages_js_vue.md\":\"b2ec4ea3\",\"pages_js_wx.md\":\"59e52c95\",\"pages_mysql_mysql.md\":\"045fa5b9\",\"pages_uselibrary_index.md\":\"caf69624\",\"pages_utils_index.md\":\"ace2182e\",\"pages_vue_diff.md\":\"137d1b3f\",\"pages_vue_reactivity.md\":\"23f879f9\"}")</script>
    <script type="module" async src="/assets/app.9fda2e54.js"></script>
    
  </body>
</html>