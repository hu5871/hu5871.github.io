<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker入门 | 前端</title>
    <meta name="description" content="记录一些有趣的">
    <link rel="stylesheet" href="/assets/style.b543def0.css">
    <link rel="modulepreload" href="/assets/app.a4c349e0.js">
    <link rel="modulepreload" href="/assets/pages_containerAndIntegration_docker.md.eb45e329.lean.js">
    
    <meta name="author" content="Vbenjs Team">
  <meta name="keywords" content="vben, vitejs, vite, ant-design-vue, vue">
  <link rel="icon" type="image/svg+xml" href="/logo.svg">
  <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
  <meta name="keywords" content="vue vben admin docs">
  <link rel="icon" href="/favicon.ico">
  <script>(()=>{const e=localStorage.getItem("vitepress-theme-appearance"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="theme"><header class="nav-bar" data-v-2a5924c9><div class="showSide" data-v-2a5924c9><span role="img" aria-label="menu" class="anticon anticon-menu" data-v-2a5924c9><svg focusable="false" class="" style="" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true" viewbox="64 64 896 896"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></div><div data-v-2a5924c9><span data-v-2a5924c9>前端博客</span></div><div class="flex-grow" data-v-2a5924c9></div><!--[--><div class="nav-link" data-v-9c461d30><!--[--><!--[--><div class="item" data-v-9c461d30><div class="nav-dropdown-link navDrop" data-v-9c461d30 data-v-6ecf7aae><button class="button" data-v-6ecf7aae><span class="button-text" data-v-6ecf7aae>源码</span><span class="button-arrow" data-v-6ecf7aae></span></button><ul class="dialog" data-v-6ecf7aae><!--[--><li class="dialog-item" data-v-6ecf7aae><div class="nav-dropdown-link-item" data-v-6ecf7aae><a class="item" href="/pages/vue/reactivity" data-v-6ecf7aae><span class="arrow" data-v-6ecf7aae></span><span class="text" data-v-6ecf7aae>vue3源码</span><span class="icon" data-v-6ecf7aae><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-6ecf7aae><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><!--]--></ul></div></div><!--]--><!--[--><div class="item" data-v-9c461d30><div class="nav-dropdown-link navDrop" data-v-9c461d30 data-v-6ecf7aae><button class="button" data-v-6ecf7aae><span class="button-text" data-v-6ecf7aae>面试题</span><span class="button-arrow" data-v-6ecf7aae></span></button><ul class="dialog" data-v-6ecf7aae><!--[--><li class="dialog-item" data-v-6ecf7aae><div class="nav-dropdown-link-item" data-v-6ecf7aae><a class="item" href="/pages/js/js" data-v-6ecf7aae><span class="arrow" data-v-6ecf7aae></span><span class="text" data-v-6ecf7aae>面试题</span><span class="icon" data-v-6ecf7aae><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-6ecf7aae><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><!--]--></ul></div></div><!--]--><!--[--><div class="item" data-v-9c461d30><div class="nav-dropdown-link navDrop" data-v-9c461d30 data-v-6ecf7aae><button class="button" data-v-6ecf7aae><span class="button-text" data-v-6ecf7aae>TS</span><span class="button-arrow" data-v-6ecf7aae></span></button><ul class="dialog" data-v-6ecf7aae><!--[--><li class="dialog-item" data-v-6ecf7aae><div class="nav-dropdown-link-item" data-v-6ecf7aae><a class="item" href="/pages/ts/index" data-v-6ecf7aae><span class="arrow" data-v-6ecf7aae></span><span class="text" data-v-6ecf7aae>typeScript</span><span class="icon" data-v-6ecf7aae><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-6ecf7aae><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><!--]--></ul></div></div><!--]--><!--[--><div class="item" data-v-9c461d30><div class="nav-dropdown-link navDrop" data-v-9c461d30 data-v-6ecf7aae><button class="button" data-v-6ecf7aae><span class="button-text" data-v-6ecf7aae>数据库</span><span class="button-arrow" data-v-6ecf7aae></span></button><ul class="dialog" data-v-6ecf7aae><!--[--><li class="dialog-item" data-v-6ecf7aae><div class="nav-dropdown-link-item" data-v-6ecf7aae><a class="item" href="/pages/mysql/mysql" data-v-6ecf7aae><span class="arrow" data-v-6ecf7aae></span><span class="text" data-v-6ecf7aae>mysql</span><span class="icon" data-v-6ecf7aae><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-6ecf7aae><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><!--]--></ul></div></div><!--]--><!--[--><div class="item" data-v-9c461d30><div class="nav-dropdown-link navDrop" data-v-9c461d30 data-v-6ecf7aae><button class="button" data-v-6ecf7aae><span class="button-text" data-v-6ecf7aae>实用的库</span><span class="button-arrow" data-v-6ecf7aae></span></button><ul class="dialog" data-v-6ecf7aae><!--[--><li class="dialog-item" data-v-6ecf7aae><div class="nav-dropdown-link-item" data-v-6ecf7aae><a class="item" href="/pages/useLibrary/index" data-v-6ecf7aae><span class="arrow" data-v-6ecf7aae></span><span class="text" data-v-6ecf7aae>实用的库</span><span class="icon" data-v-6ecf7aae><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-6ecf7aae><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><!--]--></ul></div></div><!--]--><!--[--><div class="item" data-v-9c461d30><div class="nav-dropdown-link navDrop" data-v-9c461d30 data-v-6ecf7aae><button class="button" data-v-6ecf7aae><span class="button-text" data-v-6ecf7aae>数据结构与算法</span><span class="button-arrow" data-v-6ecf7aae></span></button><ul class="dialog" data-v-6ecf7aae><!--[--><li class="dialog-item" data-v-6ecf7aae><div class="nav-dropdown-link-item" data-v-6ecf7aae><a class="item" href="/pages/DSAA/dataStructure" data-v-6ecf7aae><span class="arrow" data-v-6ecf7aae></span><span class="text" data-v-6ecf7aae>数据结构</span><span class="icon" data-v-6ecf7aae><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-6ecf7aae><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-6ecf7aae><div class="nav-dropdown-link-item" data-v-6ecf7aae><a class="item" href="/pages/DSAA/algorithm" data-v-6ecf7aae><span class="arrow" data-v-6ecf7aae></span><span class="text" data-v-6ecf7aae>算法</span><span class="icon" data-v-6ecf7aae><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-6ecf7aae><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><!--]--></ul></div></div><!--]--><!--[--><div class="item" data-v-9c461d30><div class="nav-dropdown-link navDrop" data-v-9c461d30 data-v-6ecf7aae><button class="button" data-v-6ecf7aae><span class="button-text" data-v-6ecf7aae>设计模式</span><span class="button-arrow" data-v-6ecf7aae></span></button><ul class="dialog" data-v-6ecf7aae><!--[--><li class="dialog-item" data-v-6ecf7aae><div class="nav-dropdown-link-item" data-v-6ecf7aae><a class="item" href="/pages/designPattern/index" data-v-6ecf7aae><span class="arrow" data-v-6ecf7aae></span><span class="text" data-v-6ecf7aae>设计模式</span><span class="icon" data-v-6ecf7aae><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-6ecf7aae><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><!--]--></ul></div></div><!--]--><!--[--><div class="item" data-v-9c461d30><div class="nav-dropdown-link navDrop" data-v-9c461d30 data-v-6ecf7aae><button class="button" data-v-6ecf7aae><span class="button-text" data-v-6ecf7aae>容器与集成部署</span><span class="button-arrow" data-v-6ecf7aae></span></button><ul class="dialog" data-v-6ecf7aae><!--[--><li class="dialog-item" data-v-6ecf7aae><div class="nav-dropdown-link-item" data-v-6ecf7aae><a class="item" href="/pages/containerAndIntegration/docker" data-v-6ecf7aae><span class="arrow" data-v-6ecf7aae></span><span class="text" data-v-6ecf7aae>docker</span><span class="icon" data-v-6ecf7aae><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-6ecf7aae><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-6ecf7aae><div class="nav-dropdown-link-item" data-v-6ecf7aae><a class="item" href="/pages/containerAndIntegration/jenkins" data-v-6ecf7aae><span class="arrow" data-v-6ecf7aae></span><span class="text" data-v-6ecf7aae>jenkins</span><span class="icon" data-v-6ecf7aae><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-6ecf7aae><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><!--]--></ul></div></div><!--]--><!--[--><div class="item" data-v-9c461d30><div class="nav-dropdown-link navDrop" data-v-9c461d30 data-v-6ecf7aae><button class="button" data-v-6ecf7aae><span class="button-text" data-v-6ecf7aae>ide</span><span class="button-arrow" data-v-6ecf7aae></span></button><ul class="dialog" data-v-6ecf7aae><!--[--><li class="dialog-item" data-v-6ecf7aae><div class="nav-dropdown-link-item" data-v-6ecf7aae><a class="item" href="/pages/ide/index" data-v-6ecf7aae><span class="arrow" data-v-6ecf7aae></span><span class="text" data-v-6ecf7aae>vscode</span><span class="icon" data-v-6ecf7aae><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-6ecf7aae><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><!--]--></ul></div></div><!--]--><!--[--><div class="item" data-v-9c461d30><div class="nav-dropdown-link navDrop" data-v-9c461d30 data-v-6ecf7aae><button class="button" data-v-6ecf7aae><span class="button-text" data-v-6ecf7aae>其他工具</span><span class="button-arrow" data-v-6ecf7aae></span></button><ul class="dialog" data-v-6ecf7aae><!--[--><li class="dialog-item" data-v-6ecf7aae><div class="nav-dropdown-link-item" data-v-6ecf7aae><a class="item" href="/pages/utils/index" data-v-6ecf7aae><span class="arrow" data-v-6ecf7aae></span><span class="text" data-v-6ecf7aae>其他工具</span><span class="icon" data-v-6ecf7aae><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-6ecf7aae><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><!--]--></ul></div></div><!--]--><!--]--><button class="nav-btn" aria-label="Toggle Theme" data-v-9c461d30><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" width="1em" height="1em" preserveaspectratio="xMidYMid meet" viewbox="0 0 24 24" data-v-9c461d30><path fill="currentColor" d="M12 18a6 6 0 1 1 0-12a6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8a4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636L5.636 7.05L3.515 4.93zM16.95 18.364l1.414-1.414l2.121 2.121l-1.414 1.414l-2.121-2.121zm2.121-14.85l1.414 1.415l-2.121 2.121l-1.414-1.414l2.121-2.121zM5.636 16.95l1.414 1.414l-2.121 2.121l-1.414-1.414l2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"></path></svg><span class="iconify" data-icon="ri:sun-line" data-v-9c461d30></span></button></div><div class="nav-mini" data-v-9c461d30><button class="nav-btn" aria-label="Toggle Theme" data-v-9c461d30><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" width="1em" height="1em" preserveaspectratio="xMidYMid meet" viewbox="0 0 24 24" data-v-9c461d30><path fill="currentColor" d="M12 18a6 6 0 1 1 0-12a6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8a4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636L5.636 7.05L3.515 4.93zM16.95 18.364l1.414-1.414l2.121 2.121l-1.414 1.414l-2.121-2.121zm2.121-14.85l1.414 1.415l-2.121 2.121l-1.414-1.414l2.121-2.121zM5.636 16.95l1.414 1.414l-2.121 2.121l-1.414-1.414l2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"></path></svg><span class="iconify" data-icon="ri:sun-line" data-v-9c461d30></span></button></div><!--]--></header><!----><aside class="sidebar" data-v-8e164692><nav class="nav-links nav" data-v-8e164692 data-v-c1117b78><!--[--><div data-v-c1117b78><div class="nav-dropdown-link" data-v-c1117b78 data-v-10889c82><button class="button" data-v-10889c82><span class="button-text" data-v-10889c82>源码</span><span class="right button-arrow" data-v-10889c82></span></button><ul class="dialog" data-v-10889c82><!--[--><li class="dialog-item" data-v-10889c82><div class="nav-dropdown-link-item" data-v-10889c82><a class="item" href="/pages/vue/reactivity" data-v-10889c82><span class="arrow" data-v-10889c82></span><span class="text" data-v-10889c82>vue3源码</span></a></div></li><!--]--></ul></div></div><div data-v-c1117b78><div class="nav-dropdown-link" data-v-c1117b78 data-v-10889c82><button class="button" data-v-10889c82><span class="button-text" data-v-10889c82>面试题</span><span class="right button-arrow" data-v-10889c82></span></button><ul class="dialog" data-v-10889c82><!--[--><li class="dialog-item" data-v-10889c82><div class="nav-dropdown-link-item" data-v-10889c82><a class="item" href="/pages/js/js" data-v-10889c82><span class="arrow" data-v-10889c82></span><span class="text" data-v-10889c82>面试题</span></a></div></li><!--]--></ul></div></div><div data-v-c1117b78><div class="nav-dropdown-link" data-v-c1117b78 data-v-10889c82><button class="button" data-v-10889c82><span class="button-text" data-v-10889c82>TS</span><span class="right button-arrow" data-v-10889c82></span></button><ul class="dialog" data-v-10889c82><!--[--><li class="dialog-item" data-v-10889c82><div class="nav-dropdown-link-item" data-v-10889c82><a class="item" href="/pages/ts/index" data-v-10889c82><span class="arrow" data-v-10889c82></span><span class="text" data-v-10889c82>typeScript</span></a></div></li><!--]--></ul></div></div><div data-v-c1117b78><div class="nav-dropdown-link" data-v-c1117b78 data-v-10889c82><button class="button" data-v-10889c82><span class="button-text" data-v-10889c82>数据库</span><span class="right button-arrow" data-v-10889c82></span></button><ul class="dialog" data-v-10889c82><!--[--><li class="dialog-item" data-v-10889c82><div class="nav-dropdown-link-item" data-v-10889c82><a class="item" href="/pages/mysql/mysql" data-v-10889c82><span class="arrow" data-v-10889c82></span><span class="text" data-v-10889c82>mysql</span></a></div></li><!--]--></ul></div></div><div data-v-c1117b78><div class="nav-dropdown-link" data-v-c1117b78 data-v-10889c82><button class="button" data-v-10889c82><span class="button-text" data-v-10889c82>实用的库</span><span class="right button-arrow" data-v-10889c82></span></button><ul class="dialog" data-v-10889c82><!--[--><li class="dialog-item" data-v-10889c82><div class="nav-dropdown-link-item" data-v-10889c82><a class="item" href="/pages/useLibrary/index" data-v-10889c82><span class="arrow" data-v-10889c82></span><span class="text" data-v-10889c82>实用的库</span></a></div></li><!--]--></ul></div></div><div data-v-c1117b78><div class="nav-dropdown-link" data-v-c1117b78 data-v-10889c82><button class="button" data-v-10889c82><span class="button-text" data-v-10889c82>数据结构与算法</span><span class="right button-arrow" data-v-10889c82></span></button><ul class="dialog" data-v-10889c82><!--[--><li class="dialog-item" data-v-10889c82><div class="nav-dropdown-link-item" data-v-10889c82><a class="item" href="/pages/DSAA/dataStructure" data-v-10889c82><span class="arrow" data-v-10889c82></span><span class="text" data-v-10889c82>数据结构</span></a></div></li><li class="dialog-item" data-v-10889c82><div class="nav-dropdown-link-item" data-v-10889c82><a class="item" href="/pages/DSAA/algorithm" data-v-10889c82><span class="arrow" data-v-10889c82></span><span class="text" data-v-10889c82>算法</span></a></div></li><!--]--></ul></div></div><div data-v-c1117b78><div class="nav-dropdown-link" data-v-c1117b78 data-v-10889c82><button class="button" data-v-10889c82><span class="button-text" data-v-10889c82>设计模式</span><span class="right button-arrow" data-v-10889c82></span></button><ul class="dialog" data-v-10889c82><!--[--><li class="dialog-item" data-v-10889c82><div class="nav-dropdown-link-item" data-v-10889c82><a class="item" href="/pages/designPattern/index" data-v-10889c82><span class="arrow" data-v-10889c82></span><span class="text" data-v-10889c82>设计模式</span></a></div></li><!--]--></ul></div></div><div data-v-c1117b78><div class="nav-dropdown-link" data-v-c1117b78 data-v-10889c82><button class="button" data-v-10889c82><span class="button-text" data-v-10889c82>容器与集成部署</span><span class="right button-arrow" data-v-10889c82></span></button><ul class="dialog" data-v-10889c82><!--[--><li class="dialog-item" data-v-10889c82><div class="nav-dropdown-link-item" data-v-10889c82><a class="item" href="/pages/containerAndIntegration/docker" data-v-10889c82><span class="arrow" data-v-10889c82></span><span class="text" data-v-10889c82>docker</span></a></div></li><li class="dialog-item" data-v-10889c82><div class="nav-dropdown-link-item" data-v-10889c82><a class="item" href="/pages/containerAndIntegration/jenkins" data-v-10889c82><span class="arrow" data-v-10889c82></span><span class="text" data-v-10889c82>jenkins</span></a></div></li><!--]--></ul></div></div><div data-v-c1117b78><div class="nav-dropdown-link" data-v-c1117b78 data-v-10889c82><button class="button" data-v-10889c82><span class="button-text" data-v-10889c82>ide</span><span class="right button-arrow" data-v-10889c82></span></button><ul class="dialog" data-v-10889c82><!--[--><li class="dialog-item" data-v-10889c82><div class="nav-dropdown-link-item" data-v-10889c82><a class="item" href="/pages/ide/index" data-v-10889c82><span class="arrow" data-v-10889c82></span><span class="text" data-v-10889c82>vscode</span></a></div></li><!--]--></ul></div></div><div data-v-c1117b78><div class="nav-dropdown-link" data-v-c1117b78 data-v-10889c82><button class="button" data-v-10889c82><span class="button-text" data-v-10889c82>其他工具</span><span class="right button-arrow" data-v-10889c82></span></button><ul class="dialog" data-v-10889c82><!--[--><li class="dialog-item" data-v-10889c82><div class="nav-dropdown-link-item" data-v-10889c82><a class="item" href="/pages/utils/index" data-v-10889c82><span class="arrow" data-v-10889c82></span><span class="text" data-v-10889c82>其他工具</span></a></div></li><!--]--></ul></div></div><!--]--></nav><ul class="sidebar-links" data-v-8e164692><!--[--><li class="sidebar-link" data-v-8e164692><p class="sidebar-link-item">容器与持续集成部署</p><ul class="sidebar-links"><!--[--><li class="sidebar-link"><a class="active sidebar-link-item" href="/pages/containerAndIntegration/docker">docker</a><ul class="sidebar-links"><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="#docker入门">Docker入门</a><!----></li><!--]--></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/pages/containerAndIntegration/jenkins">jenkins</a><!----></li><!--]--></ul></li><!--]--></ul></aside><div class="sidebar-mask"></div><div class="page" data-v-76de30a3><div class="container" data-v-76de30a3><div class="content" data-v-76de30a3><div style="position:relative;" data-v-76de30a3><div><h3 id="docker入门" tabindex="-1">Docker入门 <a class="header-anchor" href="#docker入门" aria-hidden="true">#</a></h3><h5 id="手把手教你发布前端和node-js" tabindex="-1">手把手教你发布前端和node.js <a class="header-anchor" href="#手把手教你发布前端和node-js" aria-hidden="true">#</a></h5><p>本节我们就来探索一下 <code>Docker</code> 的神秘世界，从零到一掌握 <code>Docker</code> 的基本原理与实践操作。别再守着前端那一亩三分地，是时候该开疆扩土了。</p><p><code>本次章节使用mac,个别命令行命令应根据自身操作系统调整 </code></p><h4 id="认识docker" tabindex="-1">认识docker <a class="header-anchor" href="#认识docker" aria-hidden="true">#</a></h4><p><code>Docker</code> 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的容器中，然后发布到任何流行的 <code>Linux</code> 机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口。</p><p><code>Docker</code> 技术的<strong>三大核心概念</strong>，分别是：镜像 <code>Image</code>、容器 <code>Container</code>、仓库 <code>Repository</code>。</p><h4 id="安装docker" tabindex="-1">安装docker <a class="header-anchor" href="#安装docker" aria-hidden="true">#</a></h4><p>前往<a href="https://www.docker.com/get-started/" target="_blank" rel="noopener noreferrer">docker官方网站</a>下载</p><p><img src="/assets/Snipaste_2022-06-20_23-17-53.a231058e.png" alt=""></p><h5 id="查看版本" tabindex="-1">查看版本 <a class="header-anchor" href="#查看版本" aria-hidden="true">#</a></h5><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker -v  </span></span>
<span class="line"></span></code></pre></div><h4 id="配置镜像加速" tabindex="-1">配置镜像加速 <a class="header-anchor" href="#配置镜像加速" aria-hidden="true">#</a></h4><p>避免tcp连接超时</p><p><img src="/assets/Snipaste_2022-06-21_02-12-26.996291f5.png" alt=""></p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  &quot;registry-mirrors&quot;: [</span></span>
<span class="line"><span style="color:#A6ACCD;">    &quot;http://hub-mirror.c.163.com/&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">    &quot;https://registry.docker-cn.com&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  ],</span></span>
<span class="line"><span style="color:#A6ACCD;">  &quot;insecure-registries&quot;:[],</span></span>
<span class="line"><span style="color:#A6ACCD;">  &quot;experimental&quot;: false,</span></span>
<span class="line"><span style="color:#A6ACCD;">  &quot;debug&quot;: true</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h4 id="快速开始" tabindex="-1">快速开始 <a class="header-anchor" href="#快速开始" aria-hidden="true">#</a></h4><ol><li><p><strong>为了快捷，我们直接使用<code>Vue</code> 脚手架构建项目</strong>：</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">vue create vue-docker-demo  </span></span>
<span class="line"></span></code></pre></div></li><li><p><strong>打包</strong>：</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">yarn build  </span></span>
<span class="line"></span></code></pre></div><p>打包完成，项目目录下的 <code>Dist</code> 就是我们要部署的静态资源了，我们继续下一步。</p><p><strong>需要注意</strong>：前端项目一般分两类，一类直接 <code>Nginx</code> 静态部署，一类需要启动 <code>Node</code> 服务。<code>node</code>服务拉到最后查看</p></li><li><p><strong>项目根目录新建Dockerfile</strong></p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> vue-docker-demo </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> touch Dockerfile</span></span>
<span class="line"></span></code></pre></div><p>此时项目目录如下：</p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">.  </span></span>
<span class="line"><span style="color:#A6ACCD;">├── Dockerfile  </span></span>
<span class="line"><span style="color:#A6ACCD;">├── README.md  </span></span>
<span class="line"><span style="color:#A6ACCD;">├── babel.config.js  </span></span>
<span class="line"><span style="color:#A6ACCD;">├── dist  </span></span>
<span class="line"><span style="color:#A6ACCD;">├── node_modules  </span></span>
<span class="line"><span style="color:#A6ACCD;">├── package.json  </span></span>
<span class="line"><span style="color:#A6ACCD;">├── public  </span></span>
<span class="line"><span style="color:#A6ACCD;">├── src  </span></span>
<span class="line"><span style="color:#A6ACCD;">└── yarn.lock  </span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div></li><li><p><strong>准备 <code>Nginx</code> 镜像</strong></p><p>运行 <code>Docker</code> 桌面端，就会默认启动实例，我们在控制台拉取 <code>Nginx</code> 镜像</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker pull nginx  </span></span>
<span class="line"></span></code></pre></div><p>控制台会出现如下信息：</p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">Using default tag: latest</span></span>
<span class="line"><span style="color:#A6ACCD;">latest: Pulling from library/nginx</span></span>
<span class="line"><span style="color:#A6ACCD;">42c077c10790: Pull complete </span></span>
<span class="line"><span style="color:#A6ACCD;">62c70f376f6a: Pull complete </span></span>
<span class="line"><span style="color:#A6ACCD;">915cc9bd79c2: Pull complete </span></span>
<span class="line"><span style="color:#A6ACCD;">75a963e94de0: Pull complete </span></span>
<span class="line"><span style="color:#A6ACCD;">7b1fab684d70: Pull complete </span></span>
<span class="line"><span style="color:#A6ACCD;">db24d06d5af4: Pull complete </span></span>
<span class="line"><span style="color:#A6ACCD;">Digest: sha256:2bcabc23b45489fb0885d69a06ba1d648aeda973fae7bb981bafbb884165e514</span></span>
<span class="line"><span style="color:#A6ACCD;">Status: Downloaded newer image for nginx:latest</span></span>
<span class="line"><span style="color:#A6ACCD;">docker.io/library/nginx:latest</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>如果你出现这样的异常，请确认 <code>Docker</code> 实例是否正常运行。</p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running?  </span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>镜像准备 <code>OK</code>，我们在根目录创建 <code>Nginx</code> 配置文件：</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">touch default.conf</span></span>
<span class="line"></span></code></pre></div><p>写入：</p><div class="language-nginx"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">server</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> listen </span><span style="color:#A6ACCD;">      </span><span style="color:#F78C6C;">80</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> server_name </span><span style="color:#A6ACCD;"> localhost</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">#charset koi8-r;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> access_log </span><span style="color:#A6ACCD;"> /var/log/nginx/host.access.log </span><span style="color:#89DDFF;"> main;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> error_log </span><span style="color:#A6ACCD;"> /var/log/nginx/error.log </span><span style="color:#89DDFF;"> error;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">/ </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> root </span><span style="color:#A6ACCD;">  /usr/share/nginx/html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> index </span><span style="color:#A6ACCD;"> index.html index.htm</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> error_page </span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">500</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">502</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">503</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">504</span><span style="color:#A6ACCD;">  /50x.html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/50x.html </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> root </span><span style="color:#A6ACCD;">  /usr/share/nginx/html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span></code></pre></div></li><li><p><strong>配置镜像</strong></p><p>打开Dockerfile，写入：</p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">FROM nginx  </span></span>
<span class="line"><span style="color:#A6ACCD;">COPY dist/ /usr/share/nginx/html/  </span></span>
<span class="line"><span style="color:#A6ACCD;">COPY default.conf /etc/nginx/conf.d/default.conf </span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>我们逐行解释一下代码：</p><ul><li><code>FROM nginx</code> 指定该镜像是基于 <code>nginx:latest</code> 镜像而构建的;</li><li><code>COPY dist/ /usr/share/nginx/html/</code> 命令的意思是将项目根目录下 <code>dist</code> 文件夹中的所有文件复制到镜像中 <code>/usr/share/nginx/html/</code> 目录下；</li><li><code>COPY default.conf /etc/nginx/conf.d/default.conf</code> 将 <code>default.conf</code> 复制到 <code>etc/nginx/conf.d/default.conf</code>，用本地的 <code>default.conf</code> 配置来替换 <code>Nginx</code> 镜像里的默认配置。</li></ul></li><li><p><strong>构建镜像</strong></p><p>Doker通过build命令来构建镜像</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker build -t vue-docker-demo </span><span style="color:#82AAFF;">.</span></span>
<span class="line"></span></code></pre></div><p>我们解释一下上述代码：</p><ul><li><code>-t</code> 参数给镜像命名 <code>vue-docker-demo</code></li><li><code>.</code> 是基于当前目录的 <code>Dockerfile</code> 来构建镜像</li></ul><p>执行成功后，将会输出：</p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">[+] Building 0.3s (8/8) FINISHED                                                                                                                                    </span></span>
<span class="line"><span style="color:#A6ACCD;"> =&gt; [internal] load build definition from Dockerfile                                                                                                           0.0s</span></span>
<span class="line"><span style="color:#A6ACCD;"> =&gt; =&gt; transferring dockerfile: 142B                                                                                                                           0.0s</span></span>
<span class="line"><span style="color:#A6ACCD;"> =&gt; [internal] load .dockerignore                                                                                                                              0.0s</span></span>
<span class="line"><span style="color:#A6ACCD;"> =&gt; =&gt; transferring context: 2B                                                                                                                                0.0s</span></span>
<span class="line"><span style="color:#A6ACCD;"> =&gt; [internal] load metadata for docker.io/library/nginx:latest                                                                                                0.0s</span></span>
<span class="line"><span style="color:#A6ACCD;"> =&gt; [1/3] FROM docker.io/library/nginx                                                                                                                         0.1s</span></span>
<span class="line"><span style="color:#A6ACCD;"> =&gt; [internal] load build context                                                                                                                              0.1s</span></span>
<span class="line"><span style="color:#A6ACCD;"> =&gt; =&gt; transferring context: 6.35MB                                                                                                                            0.1s</span></span>
<span class="line"><span style="color:#A6ACCD;"> =&gt; [2/3] COPY dist/ /usr/share/nginx/html/                                                                                                                    0.0s</span></span>
<span class="line"><span style="color:#A6ACCD;"> =&gt; [3/3] COPY default.conf /etc/nginx/conf.d/default.conf                                                                                                     0.0s</span></span>
<span class="line"><span style="color:#A6ACCD;"> =&gt; exporting to image                                                                                                                                         0.0s</span></span>
<span class="line"><span style="color:#A6ACCD;"> =&gt; =&gt; exporting layers                                                                                                                                        0.0s</span></span>
<span class="line"><span style="color:#A6ACCD;"> =&gt; =&gt; writing image sha256:14d89b0d41a388d9c682cc679956c1e292fc3a58f4aae41e57bb8a6a4ccc269c                                                                   0.0s</span></span>
<span class="line"><span style="color:#A6ACCD;"> =&gt; =&gt; naming to docker.io/library/vue-docker-demo</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>镜像制作成功！我们来查看一下容器：</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker image ls </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> grep vue-docker-demo</span></span>
<span class="line"></span></code></pre></div><p>输出镜像信息</p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">vue-docker-demo  latest    14d89b0d41a3   45 seconds ago   148MB</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div></li><li><p><strong>运行容器</strong></p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker run -d -p 3000:80 --name docker-vue-test vue-docker-demo</span></span>
<span class="line"></span></code></pre></div><p>这里解释一下参数：</p><ul><li><code>-d</code> 设置容器在后台运行</li><li><code>-p</code> 表示端口映射，把本机的 <code>3000</code> 端口映射到 <code>container</code> 的 <code>80</code> 端口（这样外网就能通过本机的 <code>3000</code> 端口访问了</li><li><code>--name</code> 设置容器名 <code>docker-vue-test</code></li><li><code>vue-docker-demo</code> 是我们上面构建的镜像名字</li></ul></li><li><p><strong>访问项目</strong></p><p>因为我们映射了本机 <code>3000</code> 端口，打开浏览器，访问：<code>localhost:3000</code></p></li><li><p><strong>发布镜像</strong></p><p>如果你想为社区贡献力量，那么需要将镜像发布，方便其他开发者使用。</p><p>发布镜像需要如下步骤：</p><ul><li>登陆 <code>[dockerhub](https://hub.docker.com)</code>，注册账号；</li><li>命令行执行 <code>docker login</code>，之后输入我们的账号密码，进行登录；</li><li>推送镜像之前，需要打一个 <code>Tag</code>，执行 <code>docker tag &lt;image&gt; &lt;username&gt;/&lt;repository&gt;:&lt;tag&gt;</code></li></ul></li></ol><h4 id="如果要制作node服务镜像" tabindex="-1">如果要制作node服务镜像 <a class="header-anchor" href="#如果要制作node服务镜像" aria-hidden="true">#</a></h4><ul><li><p><strong>拉取node镜像</strong></p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker pull node</span></span>
<span class="line"></span></code></pre></div><p>拉取完成如下：</p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">latest: Pulling from library/node</span></span>
<span class="line"><span style="color:#A6ACCD;">e756f3fdd6a3: Pull complete</span></span>
<span class="line"><span style="color:#A6ACCD;">bf168a674899: Pull complete</span></span>
<span class="line"><span style="color:#A6ACCD;">e604223835cc: Pull complete</span></span>
<span class="line"><span style="color:#A6ACCD;">6d5c91c4cd86: Pull complete</span></span>
<span class="line"><span style="color:#A6ACCD;">2cc8d8854262: Pull complete</span></span>
<span class="line"><span style="color:#A6ACCD;">b8798d556362: Pull complete</span></span>
<span class="line"><span style="color:#A6ACCD;">e8b220cd71fa: Pull complete</span></span>
<span class="line"><span style="color:#A6ACCD;">ac6ecea6e097: Pull complete</span></span>
<span class="line"><span style="color:#A6ACCD;">b4d2266d5d6c: Pull complete</span></span>
<span class="line"><span style="color:#A6ACCD;">Digest: sha256:492afc9bf940bf881eb6906d0b439896b3fd55ffd17bda0002262a7c19ba0ee3</span></span>
<span class="line"><span style="color:#A6ACCD;">Status: Downloaded newer image for node:latest</span></span>
<span class="line"><span style="color:#A6ACCD;">docker.io/library/node:latest</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div></li><li><p><strong>编写 Dockerfile</strong></p><p>项目根目录新建Dockerfile,写入：</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">#使用14</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">15</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">0的node版本作为运行软件</span></span>
<span class="line"><span style="color:#A6ACCD;">FROM </span><span style="color:#FFCB6B;">node</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">14.15</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#A6ACCD;">#将此目录作为工作目录</span></span>
<span class="line"><span style="color:#A6ACCD;">WORKDIR </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">src</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">app</span></span>
<span class="line"><span style="color:#A6ACCD;">#复制本目录下的package文件（源文件）到工作目录（目标目录）</span></span>
<span class="line"><span style="color:#A6ACCD;">COPY </span><span style="color:#89DDFF;font-style:italic;">package</span><span style="color:#89DDFF;">*.</span><span style="color:#A6ACCD;">json </span><span style="color:#89DDFF;">./</span></span>
<span class="line"><span style="color:#A6ACCD;">#在工作目录执行npm install </span></span>
<span class="line"><span style="color:#A6ACCD;">RUN npm install</span></span>
<span class="line"><span style="color:#A6ACCD;">#将本本录下所有文件复制到目标目录</span></span>
<span class="line"><span style="color:#A6ACCD;">COPY </span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">.</span></span>
<span class="line"><span style="color:#A6ACCD;">#EXPOSE 指令是声明运行时容器提供服务端口，这只是一个声明，在运行时并不会因为这个声明应用就会开启这个端口的服务。</span></span>
<span class="line"><span style="color:#A6ACCD;">EXPOSE </span><span style="color:#F78C6C;">7000</span></span>
<span class="line"><span style="color:#A6ACCD;">#命令行执行npm run start</span></span>
<span class="line"><span style="color:#A6ACCD;">CMD [ </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">npm</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">start</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> ]</span></span>
<span class="line"></span></code></pre></div></li><li><p><strong>构建镜像</strong></p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker build -t node_server </span><span style="color:#82AAFF;">.</span></span>
<span class="line"></span></code></pre></div><p><strong>运行容器</strong></p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker run -d -p 6060:6060 --name node_server_c node_server</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><ul><li><p><strong>如果node服务需要连接数据库</strong>，例如<code>mongodb</code></p><ul><li><p>拉去mongo镜像</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker pull mongo:latest</span></span>
<span class="line"></span></code></pre></div></li><li><p>运行容器</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker run -itd --name mongo -p 27017:27017 mongo --auth</span></span>
<span class="line"></span></code></pre></div><p>参数说明：</p><ol><li><p>p 27017:27017 ：映射容器服务的 27017 端口到宿主机的 27017 端口。外部可以直接通过 宿主机 ip:27017 访问到 mongo 的服务。</p></li><li><p>–auth：需要身份密码才能访问容器服务。</p><p>–auth 为可选参数</p><ul><li><p>不填写，无需身份密码进入mongo</p></li><li><p>填写，步骤如下</p><ol><li><p>进入容器</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker </span><span style="color:#82AAFF;">exec</span><span style="color:#A6ACCD;"> -it mongo mongo admin</span></span>
<span class="line"></span></code></pre></div></li><li><p>创建名为admin,密码123456，权限为root的用户</p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">db.createUser(</span></span>
<span class="line"><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">user: &quot;admin&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">pwd: &quot;123456&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">roles: [ { role: &quot;root&quot;, db: &quot;admin&quot; } ]</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p><img src="/assets/Snipaste_2022-06-21_21-30-16.071432ca.png" alt=""></p></li></ol></li></ul></li><li><p>itd</p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">-i 以交互模式运行容器，通常与-t同时使用</span></span>
<span class="line"><span style="color:#A6ACCD;">-t 为容器重新分配一个伪输入终端,通常与-i同时使用</span></span>
<span class="line"><span style="color:#A6ACCD;">-d 后台运行容器，并返回容器id</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div></li></ol></li><li><p>不设置身份信息项目配置</p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;"> mongoose: {</span></span>
<span class="line"><span style="color:#A6ACCD;">      client: {</span></span>
<span class="line"><span style="color:#A6ACCD;">        url: &#39;mongodb://mongo容器名:27017/nodeServer&#39;, //mongo容器名即上方设置的mongo</span></span>
<span class="line"><span style="color:#A6ACCD;">      }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div></li><li><p>设置身份信息</p><p>项目配置：</p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">mongoose: {</span></span>
<span class="line"><span style="color:#A6ACCD;">      client: {</span></span>
<span class="line"><span style="color:#A6ACCD;">        url: &#39;mongodb://admin:123456@容器名:27017/nodeServer&#39;,//mongo容器名即上方设置的mongo</span></span>
<span class="line"><span style="color:#A6ACCD;">      }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div></li></ul></li></ul></li><li><p><strong>启动node_server容器 关联mongo</strong></p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker run -d -i -t -p 7001:7001 --name node_c --link mongo:mongo node_server</span></span>
<span class="line"></span></code></pre></div><p>参数说名：</p><ol><li>-p 映射的宿主机端口:容器端口</li><li>--link 容器关联 mongo容器名:mongo镜像 运行的镜像服务</li></ol></li><li><p>这样本地就可以访问docker中node服务</p></li></ul></div></div></div><div class="footer" data-v-76de30a3><div class="edit-link" data-v-76de30a3 data-v-3c031474><a class="link" href="https://github.com/hu5871/hu5871.github.io" target="_blank" rel="noopener noreferrer" data-v-3c031474>为此页提供修改建议 <svg class="icon outbound icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-3c031474><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="next-and-prev-link" data-v-76de30a3 data-v-b1c594f2><div class="container" data-v-b1c594f2><div class="prev" data-v-b1c594f2><!----></div><div class="next" data-v-b1c594f2><a class="link" href="/pages/containerAndIntegration/jenkins" data-v-b1c594f2><span class="text" data-v-b1c594f2>jenkins</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-b1c594f2><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div></div></div></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"readme.md\":\"dc66d5ae\",\"index.md\":\"e691c30b\",\"pages_dsaa_algorithm.md\":\"b432d775\",\"pages_dsaa_datastructure.md\":\"ff4dcc35\",\"pages_engineering_index.md\":\"4b9423ac\",\"pages_ide_index.md\":\"7ad2cb2a\",\"pages_containerandintegration_docker.md\":\"eb45e329\",\"pages_containerandintegration_jenkins.md\":\"b7dbedcc\",\"pages_designpattern_index.md\":\"9ab07672\",\"pages_js_cssandhtml.md\":\"12c24b33\",\"pages_js_git.md\":\"9492e7ac\",\"pages_js_http.md\":\"39284b5b\",\"pages_js_javascriptad.md\":\"9edb0dec\",\"pages_js_js.md\":\"8984a4da\",\"pages_js_vue.md\":\"d983e6f9\",\"pages_js_wx.md\":\"216f1fe1\",\"pages_mysql_mysql.md\":\"5ed438e3\",\"pages_ts_index.md\":\"979aa240\",\"pages_uselibrary_index.md\":\"9e63cdae\",\"pages_utils_index.md\":\"1edc5ef0\",\"pages_vue_diff.md\":\"63f82d1a\",\"pages_vue_reactivity.md\":\"ab045aae\"}")</script>
    <script type="module" async src="/assets/app.a4c349e0.js"></script>
    
  </body>
</html>